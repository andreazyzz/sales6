<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>销售六部 2026 实时战略看板 | 个人作战室</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Noto+Sans+SC:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { 
            font-family: 'Noto Sans SC', sans-serif; 
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); 
            color: #e2e8f0; 
            min-height: 100vh;
            overflow-x: hidden;
        }
        .glass-panel { 
            background: rgba(30, 41, 59, 0.7); 
            backdrop-filter: blur(12px); 
            border: 1px solid rgba(148, 163, 184, 0.1); 
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); 
        }
        .neon-green { text-shadow: 0 0 10px rgba(34, 197, 94, 0.5); }
        .neon-blue { text-shadow: 0 0 10px rgba(59, 130, 246, 0.5); }
        .alert-pulse { animation: pulse-red 2s infinite; }
        @keyframes pulse-red { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .slide-in { animation: slideIn 0.5s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .syncing { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .editable-field { 
            border-bottom: 2px dashed #3b82f6; 
            cursor: pointer; 
            transition: all 0.3s;
            padding: 0 4px;
            display: inline-block;
            min-width: 30px;
            text-align: center;
        }
        .editable-field:hover { 
            background: rgba(59, 130, 246, 0.2); 
            border-radius: 4px;
            color: #60a5fa;
        }
        .progress-bar { 
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #f59e0b); 
            box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        .okr-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.05));
            border: 1px solid rgba(59, 130, 246, 0.2);
            transition: all 0.3s;
        }
        .okr-card:hover {
            transform: translateY(-2px);
            border-color: rgba(59, 130, 246, 0.4);
            box-shadow: 0 8px 24px rgba(59, 130, 246, 0.15);
        }
        .person-nav {
            background: rgba(15, 23, 42, 0.95);
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            backdrop-filter: blur(10px);
        }
        .person-tab {
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }
        .person-tab.active {
            border-bottom-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
            color: #60a5fa;
        }
        .person-tab:hover:not(.active) {
            border-bottom-color: #64748b;
            background: rgba(100, 116, 139, 0.1);
        }
        .view-section { display: none; }
        .view-section.active { display: block; animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .chart-container { position: relative; height: 300px; width: 100%; }
        .completion-high { color: #22c55e; }
        .completion-mid { color: #f59e0b; }
        .completion-low { color: #ef4444; }
        .okr-grid-single-row {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }
        .okr-grid-cathy {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }
        @media (max-width: 1024px) {
            .okr-grid-single-row { grid-template-columns: 1fr; }
            .okr-grid-cathy { grid-template-columns: repeat(2, 1fr); }
        }
        @media (max-width: 768px) {
            .okr-grid-cathy { grid-template-columns: 1fr; }
        }
        .kr-item {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            padding: 0.5rem;
            background: rgba(15, 23, 42, 0.3);
            border-radius: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .kr-bullet {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
            margin-top: 0.5rem;
            flex-shrink: 0;
        }
        .strategy-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        .milestone-node {
            position: relative;
            padding-left: 24px;
        }
        .milestone-node::before {
            content: '';
            position: absolute;
            left: 0;
            top: 8px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #3b82f6;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
        }
        .milestone-node.completed::before {
            background: #22c55e;
            box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
        }
        .milestone-node::after {
            content: '';
            position: absolute;
            left: 5px;
            top: 24px;
            width: 2px;
            height: calc(100% - 16px);
            background: rgba(148, 163, 184, 0.2);
        }
        .milestone-node:last-child::after { display: none; }
        .objective-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* 沙盘作战图样式 */
        .sand-table-container {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 16px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .sand-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(59, 130, 246, 0.3);
        }

        .sand-header h1 {
            font-size: 28px;
            font-weight: 800;
            background: linear-gradient(to right, #60a5fa, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .sand-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .sand-card {
            background: rgba(51, 65, 85, 0.4);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(71, 85, 105, 0.5);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .sand-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border-color: rgba(59, 130, 246, 0.5);
        }

        .sand-card-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sand-card-title::before {
            content: '';
            width: 4px;
            height: 20px;
            background: currentColor;
            border-radius: 2px;
        }

        .progress-sand {
            margin-bottom: 12px;
            cursor: pointer;
        }

        .progress-sand-label {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            margin-bottom: 5px;
            color: #cbd5e1;
        }

        .progress-sand-bar {
            height: 8px;
            background: rgba(30, 41, 59, 0.8);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .progress-sand-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-sand-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .timeline-sand {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            position: relative;
        }

        .timeline-sand::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #ef4444, #f97316, #22c55e, #3b82f6);
            opacity: 0.3;
        }

        .quarter-sand {
            text-align: center;
            flex: 1;
            position: relative;
            cursor: pointer;
            padding: 10px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .quarter-sand:hover {
            background: rgba(255,255,255,0.05);
            transform: scale(1.05);
        }

        .quarter-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin: 0 auto 8px;
            position: relative;
            z-index: 1;
            border: 2px solid #0f172a;
        }

        .q1 { background: #ef4444; }
        .q2 { background: #f97316; }
        .q3 { background: #22c55e; }
        .q4 { background: #3b82f6; }

        .quarter-amount {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .quarter-label {
            font-size: 11px;
            color: #94a3b8;
        }

        .pyramid-sand {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            margin-top: 10px;
        }

        .pyramid-level {
            color: white;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            height: 36px;
            clip-path: polygon(5% 0%, 95% 0%, 100% 100%, 0% 100%);
            cursor: pointer;
            transition: all 0.3s;
        }

        .pyramid-level:hover {
            filter: brightness(1.2);
            transform: scaleX(1.02);
        }

        .p1 { width: 60%; background: linear-gradient(90deg, #dc2626, #ef4444); }
        .p2 { width: 70%; background: linear-gradient(90deg, #ea580c, #f97316); }
        .p3 { width: 80%; background: linear-gradient(90deg, #ca8a04, #eab308); color: #1e293b; }
        .p4 { width: 90%; background: linear-gradient(90deg, #16a34a, #22c55e); }
        .p5 { width: 100%; background: linear-gradient(90deg, #2563eb, #3b82f6); }

        .risk-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 8px;
            font-size: 13px;
            border-left: 3px solid;
        }

        .risk-high {
            background: rgba(239, 68, 68, 0.1);
            border-color: #ef4444;
            color: #fca5a5;
        }

        .risk-mid {
            background: rgba(234, 179, 8, 0.1);
            border-color: #eab308;
            color: #fde047;
        }

        .visit-summary {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 10px;
        }

        .tier-summary-card {
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(71, 85, 105, 0.5);
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .tier-summary-card:hover {
            transform: translateY(-2px);
            border-color: currentColor;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .tier-a-plus { color: #ef4444; }
        .tier-a { color: #f97316; }
        .tier-b { color: #eab308; }
        .tier-c { color: #22c55e; }

        .tier-name {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .tier-visits {
            font-size: 24px;
            font-weight: 800;
            color: #fbbf24;
        }

        .tier-hint {
            font-size: 10px;
            color: #94a3b8;
            margin-top: 5px;
        }

        .summary-bar-sand {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(148, 163, 184, 0.2);
        }

        .summary-item-sand {
            text-align: center;
            padding: 15px;
            background: rgba(30, 41, 59, 0.6);
            border-radius: 8px;
            border: 1px solid rgba(71, 85, 105, 0.3);
        }

        .modal-sand {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-sand.active {
            display: flex;
        }

        .modal-content-sand {
            background: #1e293b;
            border-radius: 16px;
            padding: 30px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(71, 85, 105, 0.5);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }

        .modal-header-sand {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #fbbf24;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body-sand {
            font-size: 14px;
            line-height: 1.6;
            color: #cbd5e1;
        }

        .close-btn-sand {
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 24px;
            cursor: pointer;
        }

        .close-btn-sand:hover {
            color: white;
        }

        .visit-detail-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 10px;
            font-size: 13px;
        }

        .detail-grid .grid-header {
            font-weight: bold;
            color: #94a3b8;
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
            padding-bottom: 8px;
        }

        .detail-grid .grid-row {
            border-bottom: 1px solid rgba(71, 85, 105, 0.3);
            padding: 8px 0;
        }

        .detail-grid .grid-row:hover {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            padding-left: 8px;
        }

        .detail-grid .visits {
            text-align: right;
            color: #60a5fa;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .sand-table-container { padding: 15px; }
            .sand-header h1 { font-size: 20px; }
            .sand-grid { grid-template-columns: 1fr; }
            .timeline-sand { flex-direction: column; gap: 10px; }
            .timeline-sand::before { display: none; }
            .visit-summary { grid-template-columns: 1fr; }
            .modal-content-sand { padding: 20px; margin: 10px; }
        }
    </style>
<base target="_blank">
</head>
<body class="pb-20">

    <!-- 顶部导航栏 -->
    <nav class="person-nav fixed top-0 left-0 right-0 z-50 px-4 py-3">
        <div class="max-w-7xl mx-auto flex flex-col md:flex-row items-center justify-between gap-3">
            <div class="flex items-center gap-3">
                <div class="text-xl font-black text-white tracking-tight flex items-center gap-2">
                    <i class="fas fa-chart-line text-blue-400"></i>
                    <span>销售六部<span class="text-slate-400 text-sm font-normal ml-2">2026战略系统</span></span>
                </div>
            </div>

            <div class="flex gap-2 overflow-x-auto w-full md:w-auto pb-1 md:pb-0">
                <button onclick="switchView('dashboard')" id="nav-dashboard" class="person-tab active px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-1">
                    <i class="fas fa-home"></i>总看板
                </button>
                <button onclick="switchView('david')" id="nav-david" class="person-tab px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-1 text-blue-400">
                    <i class="fas fa-user"></i>David
                </button>
                <button onclick="switchView('cathy')" id="nav-cathy" class="person-tab px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-1 text-purple-400">
                    <i class="fas fa-user"></i>Cathy
                </button>
                <button onclick="switchView('echo')" id="nav-echo" class="person-tab px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-1 text-orange-400">
                    <i class="fas fa-user"></i>Echo
                </button>
                <button onclick="switchView('strategy')" id="nav-strategy" class="person-tab px-4 py-2 rounded-lg font-bold text-sm flex items-center gap-1 text-yellow-400">
                    <i class="fas fa-chess-board"></i>年度战略
                </button>
            </div>

            <div id="connectionStatus" class="px-3 py-1 rounded-full text-xs font-bold bg-yellow-500/20 text-yellow-400 border border-yellow-500/30 flex items-center gap-2 shrink-0">
                <i class="fas fa-circle-notch syncing"></i>
                <span>连接中...</span>
            </div>
            <button onclick="showHostingInfo()" class="px-3 py-1 rounded-full text-xs font-bold bg-blue-500/20 text-blue-400 border border-blue-500/30 flex items-center gap-2 shrink-0 hover:bg-blue-500/30 transition">
                <i class="fas fa-share-alt"></i><span>分享</span>
            </button>
        </div>
    </nav>

    <!-- 主内容区 -->
    <div class="max-w-7xl mx-auto px-4 pt-24">

        <!-- 视图1: 总看板 -->
        <div id="view-dashboard" class="view-section active">
            <header class="text-center mb-8 slide-in">
                <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-green-500/10 border border-green-500/20 mb-4">
                    <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                    <span class="text-green-400 text-sm font-bold">实时在线</span>
                </div>
                <h1 class="text-4xl md:text-5xl font-black text-white mb-2">
                    销售六部 <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500">战略指挥中心</span>
                </h1>
                <p class="text-slate-400 text-lg">
                    实时数据监控 | 最后更新: <span id="lastUpdate" class="text-blue-400 font-mono">--:--:--</span>
                </p>
            </header>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                <div class="glass-panel rounded-2xl p-6 border-t-4 border-green-500 slide-in">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-slate-400 text-sm font-medium">2026年已完成</span>
                        <i class="fas fa-trophy text-green-500 text-xl"></i>
                    </div>
                    <div class="text-4xl font-black text-white neon-green mb-2">
                        <span id="totalRevenue" class="editable-field" onclick="editMainData('totalRevenue')">237</span>
                        <span class="text-2xl text-slate-500">W</span>
                    </div>
                    <div class="flex items-center gap-2 text-sm">
                        <span class="bg-green-500/20 text-green-400 px-2 py-1 rounded font-bold text-xs">+169%</span>
                        <span class="text-slate-500 text-xs">同比去年</span>
                    </div>
                </div>

                <div class="glass-panel rounded-2xl p-6 border-t-4 border-blue-500 slide-in">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-slate-400 text-sm font-medium">年度目标进度</span>
                        <i class="fas fa-bullseye text-blue-500 text-xl"></i>
                    </div>
                    <div class="text-4xl font-black text-white mb-2">
                        <span id="yearProgress">6.6</span>%
                    </div>
                    <div class="w-full bg-slate-700 h-2 rounded-full overflow-hidden mb-2">
                        <div id="progressBar" class="progress-bar h-full rounded-full transition-all duration-1000" style="width: 6.6%"></div>
                    </div>
                    <div class="text-xs text-slate-400">目标: <span class="text-blue-400 font-bold">3600W</span></div>
                </div>

                <div class="glass-panel rounded-2xl p-6 border-t-4 border-purple-500 slide-in">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-slate-400 text-sm font-medium">新客户开发</span>
                        <i class="fas fa-user-plus text-purple-500 text-xl"></i>
                    </div>
                    <div class="text-4xl font-black text-white mb-2">
                        <span id="newCustomerCount" class="editable-field text-purple-400" onclick="editMainData('newCustomerCount')">11</span>
                        <span class="text-2xl text-slate-500">家</span>
                    </div>
                    <div class="text-xs text-slate-400">贡献: <span class="editable-field text-white" onclick="editMainData('newCustomerRevenue')">25</span>W</div>
                </div>

                <div class="glass-panel rounded-2xl p-6 border-t-4 border-red-500 slide-in alert-pulse">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-slate-400 text-sm font-medium">专利新业务</span>
                        <i class="fas fa-exclamation-triangle text-red-500 text-xl"></i>
                    </div>
                    <div class="text-4xl font-black text-white mb-2">
                        <span id="patentRevenue" class="editable-field text-red-400" onclick="editMainData('patentRevenue')">0.4</span>
                        <span class="text-2xl text-slate-500">W</span>
                    </div>
                    <div class="text-xs text-red-400 font-bold">⚠️ 严重滞后</div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                <div class="glass-panel rounded-2xl p-6 lg:col-span-1 slide-in">
                    <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                        <i class="fas fa-chart-pie text-blue-400"></i>业绩构成
                    </h3>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="compositionChart"></canvas>
                    </div>
                    <div class="mt-4 space-y-2 text-sm">
                        <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded">
                            <span class="text-slate-400">老客户增长</span>
                            <span class="text-green-400 font-bold">211.6W</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded">
                            <span class="text-slate-400">新客户</span>
                            <span class="text-purple-400 font-bold">25W</span>
                        </div>
                        <div class="flex justify-between items-center p-2 bg-slate-800/50 rounded">
                            <span class="text-slate-400">专利业务</span>
                            <span class="text-red-400 font-bold">0.4W</span>
                        </div>
                    </div>
                </div>

                <div class="glass-panel rounded-2xl p-6 lg:col-span-2 slide-in">
                    <h3 class="text-lg font-bold text-white mb-4 flex items-center gap-2">
                        <i class="fas fa-users text-yellow-400"></i>三大战区业绩对比
                    </h3>
                    <div class="chart-container" style="height: 250px;">
                        <canvas id="teamChart"></canvas>
                    </div>
                    <div class="grid grid-cols-3 gap-4 mt-4">
                        <div class="text-center p-3 bg-blue-500/10 rounded-lg border border-blue-500/20">
                            <div class="text-blue-400 font-bold">David</div>
                            <div class="text-2xl font-black text-white editable-field" onclick="editMainData('davidCurrent')">79</div>
                            <div class="text-xs text-slate-400">目标999W</div>
                        </div>
                        <div class="text-center p-3 bg-purple-500/10 rounded-lg border border-purple-500/20">
                            <div class="text-purple-400 font-bold">Cathy</div>
                            <div class="text-2xl font-black text-white editable-field" onclick="editMainData('cathyCurrent')">95</div>
                            <div class="text-xs text-slate-400">目标1288W</div>
                        </div>
                        <div class="text-center p-3 bg-orange-500/10 rounded-lg border border-orange-500/20">
                            <div class="text-orange-400 font-bold">Echo</div>
                            <div class="text-2xl font-black text-white editable-field" onclick="editMainData('echoCurrent')">63</div>
                            <div class="text-xs text-slate-400">目标888W</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 视图2: David个人作战室 -->
        <div id="view-david" class="view-section">
            <div class="glass-panel rounded-2xl p-8 mb-6 border-t-4 border-blue-500 slide-in">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-bold text-3xl shadow-lg shadow-blue-500/30">D</div>
                        <div>
                            <h1 class="text-3xl font-black text-white">David <span class="text-blue-400">个人作战室</span></h1>
                            <p class="text-slate-400">2026年度目标: <span class="text-2xl font-bold text-blue-400">999W</span> | 战区占比 27.8%</p>
                        </div>
                    </div>
                    <div class="flex gap-3">
                        <div class="text-center px-6 py-3 bg-blue-500/10 rounded-xl border border-blue-500/20">
                            <div class="text-3xl font-black text-white editable-field" onclick="editPersonData('david', 'current', 79)">79<span class="text-lg text-slate-500">W</span></div>
                            <div class="text-xs text-blue-400 font-bold">当前完成</div>
                        </div>
                        <div class="text-center px-6 py-3 bg-slate-800 rounded-xl border border-slate-700">
                            <div class="text-3xl font-black text-white" id="david-progress">7.9<span class="text-lg text-slate-500">%</span></div>
                            <div class="text-xs text-slate-400">目标进度</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                    <i class="fas fa-bullseye text-blue-400"></i>2026年度OKR
                </h2>
                <div class="okr-grid-single-row">
                    <div class="glass-panel rounded-2xl p-5 okr-card border-t-4 border-blue-500 slide-in">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="objective-badge bg-blue-500/20 text-blue-400">Objective 1</span>
                        </div>
                        <h3 class="text-base font-bold text-white mb-3 leading-tight">
                            超额达成年度业绩目标，巩固核心客户基本盘
                        </h3>
                        <div class="space-y-2">
                            <div class="kr-item">
                                <div class="kr-bullet text-blue-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">完成年度销售业绩</div>
                                    <div class="text-lg font-bold text-blue-400">
                                        <span class="editable-field" onclick="editOKR('david', 'o1', 'kr1', 999)">999</span>W
                                    </div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-blue-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">回款率提升至</div>
                                    <div class="text-base font-bold text-white">≥80%</div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-blue-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">新开发AB类客户</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('david', 'o1', 'kr3', 6)">6</span>个
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel rounded-2xl p-5 okr-card border-t-4 border-green-500 slide-in">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="objective-badge bg-green-500/20 text-green-400">Objective 2</span>
                        </div>
                        <h3 class="text-base font-bold text-white mb-3 leading-tight">
                            深化客户关系与贵人网络，实现可持续增长
                        </h3>
                        <div class="space-y-2">
                            <div class="kr-item">
                                <div class="kr-bullet text-green-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">建立"贵人客户池"</div>
                                    <div class="text-lg font-bold text-green-400">
                                        <span class="editable-field" onclick="editOKR('david', 'o2', 'kr1', 8)">8</span>家
                                    </div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-green-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">季度业务模式洞察报告</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('david', 'o2', 'kr2', 4)">4</span>份
                                    </div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-green-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">复活老客户贡献业绩</div>
                                    <div class="text-base font-bold text-white">≥<span class="editable-field" onclick="editOKR('david', 'o2', 'kr3', 50)">50</span>W</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel rounded-2xl p-5 okr-card border-t-4 border-purple-500 slide-in">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="objective-badge bg-purple-500/20 text-purple-400">Objective 3</span>
                        </div>
                        <h3 class="text-base font-bold text-white mb-3 leading-tight">
                            提升专业能力与工作效率，打造"签单型"销售标签
                        </h3>
                        <div class="space-y-2">
                            <div class="kr-item">
                                <div class="kr-bullet text-purple-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">AI工具应用场景</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('david', 'o3', 'kr1', 3)">3</span>类
                                    </div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-purple-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">流程优化建议落地</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('david', 'o3', 'kr2', 1)">1</span>项
                                    </div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-purple-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">客户拜访与转化率</div>
                                    <div class="text-xs text-white">拜访<span class="editable-field text-purple-400" onclick="editOKR('david', 'o3', 'kr3', 200)">200</span>次，转化率≥15%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="glass-panel rounded-2xl p-6 mb-6 slide-in">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-white flex items-center gap-2">
                        <i class="fas fa-calendar-alt text-blue-400"></i>二月执行计划
                    </h3>
                    <button onclick="saveWeekData('david')" class="px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white text-sm font-bold transition">
                        <i class="fas fa-save mr-1"></i>保存周数据
                    </button>
                </div>

                <div class="grid grid-cols-7 gap-2 mb-3 text-xs font-bold text-slate-400 border-b border-slate-700 pb-2">
                    <div class="col-span-1">执行项目</div>
                    <div class="text-center">月目标</div>
                    <div class="text-center text-blue-400">W1</div>
                    <div class="text-center text-blue-400">W2</div>
                    <div class="text-center text-blue-400">W3</div>
                    <div class="text-center text-blue-400">W4</div>
                    <div class="text-right">完成度</div>
                </div>

                <!-- KR1: 业绩 -->
                <div class="text-xs font-bold mb-1"><span class="bg-blue-500/20 text-blue-300 px-2 py-0.5 rounded">KR1 · 业绩</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div class="font-bold text-white">业绩冲刺</div>
                    <div class="text-center text-slate-300">100W</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="revenue" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="revenue" data-week="w2" onclick="editWeekData(this)">19</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="revenue" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="revenue" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="david-revenue-total">19/100</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div class="font-bold text-white">专利翻译签约</div>
                    <div class="text-center text-slate-300">10W</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="patent" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="patent" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="patent" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="patent" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="david-patent-total">0/10</div>
                </div>

                <!-- KR2: 客户拜访 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-green-500/20 text-green-300 px-2 py-0.5 rounded">KR2 · 客户拜访</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">AB类日常跟进</div>
                        <div class="text-slate-500">每天8个</div>
                    </div>
                    <div class="text-center text-slate-300">200</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="daily-followup" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="daily-followup" data-week="w2" onclick="editWeekData(this)">21</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="daily-followup" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="daily-followup" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="david-daily-followup-total">21/200</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">新增AB类联系人</div>
                        <div class="text-slate-500">全月20人</div>
                    </div>
                    <div class="text-center text-slate-300">20</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="contacts" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="contacts" data-week="w2" onclick="editWeekData(this)">3</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="contacts" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="contacts" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="david-contacts-total">3/20</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">外出拜访客户</div>
                        <div class="text-slate-500">每周5+次，AB 50%+</div>
                    </div>
                    <div class="text-center text-slate-300">20</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="visits" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="visits" data-week="w2" onclick="editWeekData(this)">14</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="visits" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="visits" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-mid" id="david-visits-total">14/20</div>
                </div>

                <!-- KR3: 维护 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded">KR3 · 维护</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">组织饭局/下午茶</div>
                        <div class="text-slate-500">全月5次</div>
                    </div>
                    <div class="text-center text-slate-300">5</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="social" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="social" data-week="w2" onclick="editWeekData(this)">1</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="social" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="social" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="david-social-total">1/5</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">赠送下午茶</div>
                        <div class="text-slate-500">每周2次</div>
                    </div>
                    <div class="text-center text-slate-300">8</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="gift-tea" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="gift-tea" data-week="w2" onclick="editWeekData(this)">3</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="gift-tea" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="gift-tea" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="david-gift-tea-total">3/8</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">催款及维护电话</div>
                        <div class="text-slate-500">每天2个</div>
                    </div>
                    <div class="text-center text-slate-300">40</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="calls" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="calls" data-week="w2" onclick="editWeekData(this)">14</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="calls" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="calls" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="david-calls-total">14/40</div>
                </div>

                <!-- KR4: 开票到账 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-orange-500/20 text-orange-300 px-2 py-0.5 rounded">KR4 · 开票与到账</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">开票提交与跟踪</div>
                        <div class="text-slate-500">全月50W</div>
                    </div>
                    <div class="text-center text-slate-300">50W</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="invoice" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="invoice" data-week="w2" onclick="editWeekData(this)">7</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="invoice" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="invoice" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="david-invoice-total">7/50</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">到账跟踪与确认</div>
                        <div class="text-slate-500">全月50W</div>
                    </div>
                    <div class="text-center text-slate-300">50W</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="payment" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="payment" data-week="w2" onclick="editWeekData(this)">7</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="payment" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-blue-400" data-person="david" data-item="payment" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="david-payment-total">7/50</div>
                </div>

                <div class="mt-4 p-4 bg-blue-500/10 rounded-xl border border-blue-500/20">
                    <div class="flex justify-between items-center">
                        <span class="font-bold text-white">二月综合完成度</span>
                        <span class="text-3xl font-black text-blue-400" id="david-overall">--</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 视图3: Cathy个人作战室 -->
        <div id="view-cathy" class="view-section">
            <div class="glass-panel rounded-2xl p-8 mb-6 border-t-4 border-purple-500 slide-in">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-purple-400 to-purple-600 flex items-center justify-center text-white font-bold text-3xl shadow-lg shadow-purple-500/30">C</div>
                        <div>
                            <h1 class="text-3xl font-black text-white">Cathy <span class="text-purple-400">个人作战室</span></h1>
                            <p class="text-slate-400">2026年度目标: <span class="text-2xl font-bold text-purple-400">1288W</span> | 战区占比 35.8%</p>
                        </div>
                    </div>
                    <div class="flex gap-3">
                        <div class="text-center px-6 py-3 bg-purple-500/10 rounded-xl border border-purple-500/20">
                            <div class="text-3xl font-black text-white editable-field" onclick="editPersonData('cathy', 'current', 95)">95<span class="text-lg text-slate-500">W</span></div>
                            <div class="text-xs text-purple-400 font-bold">当前完成</div>
                        </div>
                        <div class="text-center px-6 py-3 bg-slate-800 rounded-xl border border-slate-700">
                            <div class="text-3xl font-black text-white">7.4<span class="text-lg text-slate-500">%</span></div>
                            <div class="text-xs text-slate-400">目标进度</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                    <i class="fas fa-bullseye text-purple-400"></i>2026年度OKR
                </h2>
                <div class="okr-grid-cathy">
                    <div class="glass-panel rounded-2xl p-5 okr-card border-t-4 border-purple-500 slide-in">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="objective-badge bg-purple-500/20 text-purple-400 text-xs">O1</span>
                            <span class="text-xs text-slate-500">业绩与回款</span>
                        </div>
                        <h3 class="text-sm font-bold text-white mb-3 leading-tight">
                            实现年度业绩目标1288万元
                        </h3>
                        <div class="space-y-2">
                            <div class="kr-item">
                                <div class="kr-bullet text-purple-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">完成业绩1288万</div>
                                    <div class="text-xs text-slate-400">翰森300W、亚盛100W</div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-purple-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">年度回款率达85%以上</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel rounded-2xl p-5 okr-card border-t-4 border-blue-500 slide-in">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="objective-badge bg-blue-500/20 text-blue-400 text-xs">O2</span>
                            <span class="text-xs text-slate-500">高价值业务</span>
                        </div>
                        <h3 class="text-sm font-bold text-white mb-3 leading-tight">
                            拓展高价值业务模块
                        </h3>
                        <div class="space-y-2">
                            <div class="kr-item">
                                <div class="kr-bullet text-blue-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">专利业务签约3家以上</div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-blue-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">口译服务月度签约1单+</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel rounded-2xl p-5 okr-card border-t-4 border-green-500 slide-in">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="objective-badge bg-green-500/20 text-green-400 text-xs">O3</span>
                            <span class="text-xs text-slate-500">客户关系</span>
                        </div>
                        <h3 class="text-sm font-bold text-white mb-3 leading-tight">
                            提升客户关系与贵人网络质量
                        </h3>
                        <div class="space-y-2">
                            <div class="kr-item">
                                <div class="kr-bullet text-green-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">A类客户拜访5次/月</div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-green-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">每月3次饭局、3次贵人维护</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel rounded-2xl p-5 okr-card border-t-4 border-yellow-500 slide-in">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="objective-badge bg-yellow-500/20 text-yellow-400 text-xs">O4</span>
                            <span class="text-xs text-slate-500">能力建设</span>
                        </div>
                        <h3 class="text-sm font-bold text-white mb-3 leading-tight">
                            推动个人能力与销售方法体系化
                        </h3>
                        <div class="space-y-2">
                            <div class="kr-item">
                                <div class="kr-bullet text-yellow-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">销售冠军方法论输出</div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-yellow-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">每月1本销售/信念类书籍</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="glass-panel rounded-2xl p-6 mb-6 slide-in">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-white flex items-center gap-2">
                        <i class="fas fa-calendar-alt text-purple-400"></i>二月执行计划
                    </h3>
                    <button onclick="saveWeekData('cathy')" class="px-4 py-2 bg-purple-600 hover:bg-purple-500 rounded-lg text-white text-sm font-bold transition">
                        <i class="fas fa-save mr-1"></i>保存周数据
                    </button>
                </div>

                <div class="grid grid-cols-7 gap-2 mb-3 text-xs font-bold text-slate-400 border-b border-slate-700 pb-2">
                    <div class="col-span-1">KR项目</div>
                    <div class="text-center">月度目标</div>
                    <div class="text-center text-purple-400">W1</div>
                    <div class="text-center text-purple-400">W2</div>
                    <div class="text-center text-purple-400">W3</div>
                    <div class="text-center text-purple-400">W4</div>
                    <div class="text-right">完成度</div>
                </div>

                <!-- KR1: 客户拜访 -->
                <div class="text-xs font-bold mb-1"><span class="bg-purple-500/20 text-purple-300 px-2 py-0.5 rounded">KR1 · 客户拜访</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">A类外出拜访</div>
                        <div class="text-slate-500">恒瑞/翰森/齐鲁/君信/亚盛</div>
                    </div>
                    <div class="text-center text-slate-300">5家</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="a-visits" data-week="w1" onclick="editWeekData(this)">2</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="a-visits" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="a-visits" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="a-visits" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="cathy-a-visits-total">2/5</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">B类以上客户拜访</div>
                        <div class="text-slate-500">主要推进线索</div>
                    </div>
                    <div class="text-center text-slate-300">15家</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="b-visits" data-week="w1" onclick="editWeekData(this)">9</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="b-visits" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="b-visits" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="b-visits" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-mid" id="cathy-b-visits-total">9/15</div>
                </div>

                <!-- KR2: 拓新 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-blue-500/20 text-blue-300 px-2 py-0.5 rounded">KR2 · 拓新</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">新增A类客户联系人</div>
                        <div class="text-slate-500">每周认识5个BD</div>
                    </div>
                    <div class="text-center text-slate-300">20人</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="contacts" data-week="w1" onclick="editWeekData(this)">5</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="contacts" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="contacts" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="contacts" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="cathy-contacts-total">5/20</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">AB类新客拜访+深维</div>
                        <div class="text-slate-500">礼物推进业绩/转介绍</div>
                    </div>
                    <div class="text-center text-slate-300">5人</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="deep-visits" data-week="w1" onclick="editWeekData(this)">2</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="deep-visits" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="deep-visits" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="deep-visits" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="cathy-deep-visits-total">2/5</div>
                </div>

                <!-- KR3: 维护 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-green-500/20 text-green-300 px-2 py-0.5 rounded">KR3 · 维护</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">贵人维护</div>
                        <div class="text-slate-500">恒瑞BD/质量总监、翰森注册/BD、迈威总经理、东宝BD</div>
                    </div>
                    <div class="text-center text-slate-300">4次</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="guiren" data-week="w1" onclick="editWeekData(this)">1</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="guiren" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="guiren" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="guiren" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="cathy-guiren-total">1/4</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">饭局×2 + 咖啡×1</div>
                    </div>
                    <div class="text-center text-slate-300">3次</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="social" data-week="w1" onclick="editWeekData(this)">1</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="social" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="social" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="social" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="cathy-social-total">1/3</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">30-100W客户电话回访</div>
                        <div class="text-slate-500">健耕/东宝/迈瑞/迈威/万邦德/安通/齐鲁/爱美客等</div>
                    </div>
                    <div class="text-center text-slate-300">9家</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="call-visit" data-week="w1" onclick="editWeekData(this)">8</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="call-visit" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="call-visit" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="call-visit" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-high" id="cathy-call-visit-total">8/9</div>
                </div>

                <!-- KR4: 线索与业绩 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-yellow-500/20 text-yellow-300 px-2 py-0.5 rounded">KR4 · 线索与业绩</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">新增线索储备</div>
                        <div class="text-slate-500">W1:50W W2:80W W3:80W W4:100W</div>
                    </div>
                    <div class="text-center text-slate-300">300W</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="leads" data-week="w1" onclick="editWeekData(this)">50</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="leads" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="leads" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="leads" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="cathy-leads-total">17%</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">转化业绩</div>
                        <div class="text-slate-500">前半月100W，后半月冲100W</div>
                    </div>
                    <div class="text-center text-slate-300">200W</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="crevenue" data-week="w1" onclick="editWeekData(this)">17</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="crevenue" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="crevenue" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="crevenue" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="cathy-crevenue-total">8.5%</div>
                </div>

                <!-- KR5: 开票与到账 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-orange-500/20 text-orange-300 px-2 py-0.5 rounded">KR5 · 开票与到账</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div class="font-bold text-white">开票</div>
                    <div class="text-center text-slate-300">100W</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="invoice" data-week="w1" onclick="editWeekData(this)">10</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="invoice" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="invoice" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="invoice" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="cathy-invoice-total">10%</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div class="font-bold text-white">到账</div>
                    <div class="text-center text-slate-300">50W</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="payment" data-week="w1" onclick="editWeekData(this)">3</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="payment" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="payment" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-purple-400" data-person="cathy" data-item="payment" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="cathy-payment-total">6%</div>
                </div>

                <div class="mt-4 p-4 bg-purple-500/10 rounded-xl border border-purple-500/20">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-bold text-white">二月综合完成度</span>
                        <span class="text-3xl font-black text-purple-400" id="cathy-overall">--</span>
                    </div>
                    <p class="text-xs text-slate-400">待提升：翰森樊香梅需Andrea协助约访；线索推进需加速；开票到账节奏跟进</p>
                </div>
            </div>
        </div>

        <!-- 视图4: Echo个人作战室 -->
        <div id="view-echo" class="view-section">
            <div class="glass-panel rounded-2xl p-8 mb-6 border-t-4 border-orange-500 slide-in">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center text-white font-bold text-3xl shadow-lg shadow-orange-500/30">E</div>
                        <div>
                            <h1 class="text-3xl font-black text-white">Echo <span class="text-orange-400">个人作战室</span></h1>
                            <p class="text-slate-400">2026年度目标: <span class="text-2xl font-bold text-orange-400">888W</span> | 专利业务重点突破</p>
                        </div>
                    </div>
                    <div class="flex gap-3">
                        <div class="text-center px-6 py-3 bg-orange-500/10 rounded-xl border border-orange-500/20">
                            <div class="text-3xl font-black text-white editable-field" onclick="editPersonData('echo', 'current', 63)">63<span class="text-lg text-slate-500">W</span></div>
                            <div class="text-xs text-orange-400 font-bold">当前完成</div>
                        </div>
                        <div class="text-center px-6 py-3 bg-slate-800 rounded-xl border border-slate-700">
                            <div class="text-3xl font-black text-white">7.1<span class="text-lg text-slate-500">%</span></div>
                            <div class="text-xs text-slate-400">目标进度</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                    <i class="fas fa-bullseye text-orange-400"></i>2026年度OKR
                </h2>
                <div class="okr-grid-single-row">
                    <div class="glass-panel rounded-2xl p-5 okr-card border-t-4 border-orange-500 slide-in">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="objective-badge bg-orange-500/20 text-orange-400">Objective 1</span>
                        </div>
                        <h3 class="text-base font-bold text-white mb-3 leading-tight">
                            达成年度业绩目标，实现客户结构优化
                        </h3>
                        <div class="space-y-2">
                            <div class="kr-item">
                                <div class="kr-bullet text-orange-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">完成年度销售业绩</div>
                                    <div class="text-lg font-bold text-orange-400">
                                        <span class="editable-field" onclick="editOKR('echo', 'o1', 'kr1', 888)">888</span>W
                                    </div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-orange-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">新增B类目标客户</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('echo', 'o1', 'kr2', 24)">24</span>家/年（2家/月）
                                    </div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-orange-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">新增专利客户开发</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('echo', 'o1', 'kr3', 48)">48</span>家/年（4家/月）
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel rounded-2xl p-5 okr-card border-t-4 border-pink-500 slide-in">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="objective-badge bg-pink-500/20 text-pink-400">Objective 2</span>
                        </div>
                        <h3 class="text-base font-bold text-white mb-3 leading-tight">
                            深化客户关系网络，提升客户满意度与忠诚度
                        </h3>
                        <div class="space-y-2">
                            <div class="kr-item">
                                <div class="kr-bullet text-pink-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">大客户邮件维护</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('echo', 'o2', 'kr1', 480)">480</span>封/年（40封/月）
                                    </div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-pink-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">贵人语音问候</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('echo', 'o2', 'kr2', 240)">240</span>次/年（每周5个）
                                    </div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-pink-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">饭局/下午茶/活动</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('echo', 'o2', 'kr3', 36)">36</span>次/年（3次/月）
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="glass-panel rounded-2xl p-5 okr-card border-t-4 border-cyan-500 slide-in">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="objective-badge bg-cyan-500/20 text-cyan-400">Objective 3</span>
                        </div>
                        <h3 class="text-base font-bold text-white mb-3 leading-tight">
                            强化过程管理，提升销售效率与协同能力
                        </h3>
                        <div class="space-y-2">
                            <div class="kr-item">
                                <div class="kr-bullet text-cyan-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">外出拜访客户</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('echo', 'o3', 'kr1', 240)">240</span>家/年（20家/月）
                                    </div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-cyan-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">新增联系人</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('echo', 'o3', 'kr2', 240)">240</span>人/年（20人/月）
                                    </div>
                                </div>
                            </div>
                            <div class="kr-item">
                                <div class="kr-bullet text-cyan-400"></div>
                                <div class="flex-1">
                                    <div class="text-xs text-slate-300">Andrea协同盘点</div>
                                    <div class="text-base font-bold text-white">
                                        <span class="editable-field" onclick="editOKR('echo', 'o3', 'kr3', 48)">48</span>小时/年（每周1小时）
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="glass-panel rounded-2xl p-6 mb-6 slide-in">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-white flex items-center gap-2">
                        <i class="fas fa-calendar-alt text-orange-400"></i>二月执行计划
                    </h3>
                    <button onclick="saveWeekData('echo')" class="px-4 py-2 bg-orange-600 hover:bg-orange-500 rounded-lg text-white text-sm font-bold transition">
                        <i class="fas fa-save mr-1"></i>保存周数据
                    </button>
                </div>

                <div class="grid grid-cols-7 gap-2 mb-3 text-xs font-bold text-slate-400 border-b border-slate-700 pb-2">
                    <div class="col-span-1">执行动作</div>
                    <div class="text-center">频率/目标</div>
                    <div class="text-center text-orange-400">W1</div>
                    <div class="text-center text-orange-400">W2</div>
                    <div class="text-center text-orange-400">W3</div>
                    <div class="text-center text-orange-400">W4</div>
                    <div class="text-right">月完成</div>
                </div>

                <!-- KR1: 拜访与拓新 -->
                <div class="text-xs font-bold mb-1"><span class="bg-orange-500/20 text-orange-300 px-2 py-0.5 rounded">KR1 · 拜访与拓新</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">外出拜访</div>
                        <div class="text-slate-500">每周6家</div>
                    </div>
                    <div class="text-center text-slate-300">20家</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="visits" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="visits" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="visits" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="visits" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-visits-total">0/20</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">新增B类目标客户</div>
                        <div class="text-slate-500">完成外出2次拜访</div>
                    </div>
                    <div class="text-center text-slate-300">2家</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="b-class" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="b-class" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="b-class" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="b-class" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-b-class-total">0/2</div>
                </div>

                <!-- KR2: 大客户维护 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-pink-500/20 text-pink-300 px-2 py-0.5 rounded">KR2 · 大客户维护</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div class="font-bold text-white">大客户邮件</div>
                    <div class="text-center text-slate-300">40封</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="emails" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="emails" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="emails" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="emails" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-emails-total">0/40</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">贵人语音问候</div>
                        <div class="text-slate-500">每周5个</div>
                    </div>
                    <div class="text-center text-slate-300">20次</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="voice" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="voice" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="voice" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="voice" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-voice-total">0/20</div>
                </div>

                <!-- KR3: 专利客户 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-cyan-500/20 text-cyan-300 px-2 py-0.5 rounded">KR3 · 专利客户开发</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">新增专利客户开发</div>
                        <div class="text-slate-500">基于现有合作客户</div>
                    </div>
                    <div class="text-center text-slate-300">4家</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="patent" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="patent" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="patent" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="patent" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-patent-total">0/4</div>
                </div>

                <!-- KR4: 关系维护 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-green-500/20 text-green-300 px-2 py-0.5 rounded">KR4 · 关系维护</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">送礼执行</div>
                        <div class="text-slate-500">新年送礼1000元/月</div>
                    </div>
                    <div class="text-center text-slate-300">1000元</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="gift" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="gift" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="gift" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="gift" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-gift-total">0/1000</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">饭局/下午茶/周末活动</div>
                    </div>
                    <div class="text-center text-slate-300">3次</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="social" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="social" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="social" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="social" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-social-total">0/3</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">新年祝福贵人+群发</div>
                        <div class="text-slate-500">消息1000条</div>
                    </div>
                    <div class="text-center text-slate-300">5人+群发</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="blessing" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="blessing" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="blessing" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="blessing" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-blessing-total">0/5</div>
                </div>

                <!-- KR5: 过程管理 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-blue-500/20 text-blue-300 px-2 py-0.5 rounded">KR5 · 过程管理</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">新增联系人</div>
                        <div class="text-slate-500">每周5个</div>
                    </div>
                    <div class="text-center text-slate-300">20人</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="contacts" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="contacts" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="contacts" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="contacts" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-contacts-total">0/20</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">Andrea协同盘点</div>
                        <div class="text-slate-500">每周1小时</div>
                    </div>
                    <div class="text-center text-slate-300">4小时</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="sync" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="sync" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="sync" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="sync" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-sync-total">0/4</div>
                </div>

                <!-- KR6: 开票与到账 -->
                <div class="text-xs font-bold mt-2 mb-1"><span class="bg-yellow-500/20 text-yellow-300 px-2 py-0.5 rounded">KR6 · 开票与到账</span></div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">开票提交</div>
                        <div class="text-slate-500">按回款计划</div>
                    </div>
                    <div class="text-center text-slate-300">100W</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="invoice" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="invoice" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="invoice" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="invoice" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-invoice-total">0/100</div>
                </div>

                <div class="grid grid-cols-7 gap-2 py-2 border-b border-slate-800 items-center hover:bg-slate-800/30 transition text-xs">
                    <div>
                        <div class="font-bold text-white">到账追踪</div>
                        <div class="text-slate-500">实时跟进</div>
                    </div>
                    <div class="text-center text-slate-300">50W</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="payment" data-week="w1" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="payment" data-week="w2" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="payment" data-week="w3" onclick="editWeekData(this)">-</div>
                    <div class="text-center editable-field text-orange-400" data-person="echo" data-item="payment" data-week="w4" onclick="editWeekData(this)">-</div>
                    <div class="text-right font-bold text-xs completion-low" id="echo-payment-total">0/50</div>
                </div>

                <div class="mt-4 p-4 bg-orange-500/10 rounded-xl border border-orange-500/20">
                    <div class="flex justify-between items-center">
                        <span class="font-bold text-white">二月综合完成度</span>
                        <span class="text-3xl font-black text-orange-400" id="echo-overall">--</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 视图5: 年度战略图（沙盘作战图风格） -->
        <div id="view-strategy" class="view-section">
            <div class="sand-table-container slide-in">
                <!-- 指挥部 -->
                <div class="sand-header">
                    <h1>2026年度销售六部战神队业绩部署沙盘作战图</h1>
                    <div class="subtitle text-slate-400">
                        <span>去年基础：<strong class="text-white">1,925万</strong></span>
                        <span>→</span>
                        <span>今年目标：<span class="text-yellow-400 font-bold text-xl">3,600万</span></span>
                        <span>净增长：<strong class="text-green-400">+1,675万</strong></span>
                        <span>增长率：<strong class="text-red-400">87%</strong></span>
                    </div>
                </div>

                <!-- 第一战线：业绩来源与增长路径 -->
                <div class="sand-grid">
                    <!-- 业绩来源构成 -->
                    <div class="sand-card">
                        <div class="sand-card-title text-blue-400">业绩来源构成（3600万）</div>

                        <div class="progress-sand" onclick="showDetail('base')">
                            <div class="progress-sand-label">
                                <span>去年基础留存</span>
                                <span class="text-blue-400">1,925万 (53%)</span>
                            </div>
                            <div class="progress-sand-bar">
                                <div class="progress-sand-fill bg-blue" style="width: 53%"></div>
                            </div>
                        </div>

                        <div class="progress-sand" onclick="showDetail('growth')">
                            <div class="progress-sand-label">
                                <span>老客户增长40%</span>
                                <span class="text-green-400">+770万 (21%)</span>
                            </div>
                            <div class="progress-sand-bar">
                                <div class="progress-sand-fill bg-green" style="width: 21%"></div>
                            </div>
                        </div>

                        <div class="progress-sand" onclick="showDetail('new')">
                            <div class="progress-sand-label">
                                <span>新增3家百万客户</span>
                                <span class="text-orange-400">+300万 (8%)</span>
                            </div>
                            <div class="progress-sand-bar">
                                <div class="progress-sand-fill bg-orange" style="width: 8%"></div>
                            </div>
                        </div>

                        <div class="progress-sand" onclick="showDetail('patent')">
                            <div class="progress-sand-label">
                                <span>专利翻译新业务</span>
                                <span class="text-purple-400">+600万 (17%)</span>
                            </div>
                            <div class="progress-sand-bar">
                                <div class="progress-sand-fill bg-purple" style="width: 17%"></div>
                            </div>
                        </div>
                    </div>

                    <!-- 季度推进时间轴 -->
                    <div class="sand-card">
                        <div class="sand-card-title text-red-400">增长路径：1925→3600万战役推进</div>
                        <div class="timeline-sand">
                            <div class="quarter-sand" onclick="showDetail('q1')">
                                <div class="quarter-dot q1"></div>
                                <div class="quarter-amount text-red-400">154万</div>
                                <div class="quarter-label">Q1 存量盘点</div>
                                <div class="quarter-label" style="font-size: 10px; margin-top: 4px; color: #ef4444;">签约率30%</div>
                            </div>
                            <div class="quarter-sand" onclick="showDetail('q2')">
                                <div class="quarter-dot q2"></div>
                                <div class="quarter-amount text-orange-400">231万</div>
                                <div class="quarter-label">Q2 交叉销售</div>
                                <div class="quarter-label" style="font-size: 10px; margin-top: 4px; color: #f97316;">签约率60%</div>
                            </div>
                            <div class="quarter-sand" onclick="showDetail('q3')">
                                <div class="quarter-dot q3"></div>
                                <div class="quarter-amount text-green-400">231万</div>
                                <div class="quarter-label">Q3 框架协议</div>
                                <div class="quarter-label" style="font-size: 10px; margin-top: 4px; color: #22c55e;">签约率90%</div>
                            </div>
                            <div class="quarter-sand" onclick="showDetail('q4')">
                                <div class="quarter-dot q4"></div>
                                <div class="quarter-amount text-blue-400">154万</div>
                                <div class="quarter-label">Q4 冲刺锁定</div>
                                <div class="quarter-label" style="font-size: 10px; margin-top: 4px; color: #3b82f6;">100%达成</div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-blue-500/10 rounded-lg text-xs text-blue-400 text-center border border-blue-500/20">
                            点击季度节点查看详细作战方案 →
                        </div>
                    </div>

                    <!-- 客户层级金字塔 -->
                    <div class="sand-card">
                        <div class="sand-card-title text-orange-400">客户层级（3600万分配）</div>
                        <div class="pyramid-sand">
                            <div class="pyramid-level p1" onclick="showClient('A+')">
                                <span>A+ (1家)</span>
                                <span>500万</span>
                            </div>
                            <div class="pyramid-level p2" onclick="showClient('A')">
                                <span>A (8家)</span>
                                <span>1,030万</span>
                            </div>
                            <div class="pyramid-level p3" onclick="showClient('B')">
                                <span>B (15家)</span>
                                <span>780万</span>
                            </div>
                            <div class="pyramid-level p4" onclick="showClient('C')">
                                <span>C (20家)</span>
                                <span>490万</span>
                            </div>
                            <div class="pyramid-level p5" onclick="showClient('D')">
                                <span>D (130家)</span>
                                <span>650万</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 第二战线：详细作战单元 -->
                <div class="sand-grid">
                    <!-- 新增客户画像 -->
                    <div class="sand-card">
                        <div class="sand-card-title text-orange-400">新增3家百万级客户画像</div>
                        <div class="space-y-3">
                            <div class="bg-orange-500/10 border-l-4 border-orange-500 p-3 rounded-r-lg">
                                <div class="flex justify-between mb-1">
                                    <strong class="text-orange-400">新客户A</strong>
                                    <span class="text-xs bg-orange-500/20 px-2 py-0.5 rounded text-orange-400">接洽中</span>
                                </div>
                                <div class="text-xs text-slate-300">生物医药 | 100万/年 | Q2签约</div>
                            </div>

                            <div class="bg-yellow-500/10 border-l-4 border-yellow-500 p-3 rounded-r-lg">
                                <div class="flex justify-between mb-1">
                                    <strong class="text-yellow-400">新客户B</strong>
                                    <span class="text-xs bg-yellow-500/20 px-2 py-0.5 rounded text-yellow-400">储备</span>
                                </div>
                                <div class="text-xs text-slate-300">医疗器械 | 100万/年 | Q3签约</div>
                            </div>

                            <div class="bg-yellow-500/10 border-l-4 border-yellow-500 p-3 rounded-r-lg">
                                <div class="flex justify-between mb-1">
                                    <strong class="text-yellow-400">新客户C</strong>
                                    <span class="text-xs bg-yellow-500/20 px-2 py-0.5 rounded text-yellow-400">储备</span>
                                </div>
                                <div class="text-xs text-slate-300">CRO服务 | 100万/年 | Q4签约</div>
                            </div>
                        </div>
                    </div>

                    <!-- 外出作战规划 -->
                    <div class="sand-card">
                        <div class="sand-card-title text-red-400">2026年外出作战规划</div>
                        <div class="visit-summary">
                            <div class="tier-summary-card tier-a-plus" onclick="showVisitDetail('A+')">
                                <div class="tier-name">A+类客户</div>
                                <div class="tier-visits">30次</div>
                                <div class="tier-hint">核心战场 >> 点击查看详情</div>
                            </div>
                            <div class="tier-summary-card tier-a" onclick="showVisitDetail('A')">
                                <div class="tier-name">A类客户</div>
                                <div class="tier-visits">207次</div>
                                <div class="tier-hint">重点攻坚 >> 点击查看详情</div>
                            </div>
                            <div class="tier-summary-card tier-b" onclick="showVisitDetail('B')">
                                <div class="tier-name">B类客户</div>
                                <div class="tier-visits">129次</div>
                                <div class="tier-hint">成长型战场 >> 点击查看详情</div>
                            </div>
                            <div class="tier-summary-card tier-c" onclick="showVisitDetail('C')">
                                <div class="tier-name">C类客户</div>
                                <div class="tier-visits">108次</div>
                                <div class="tier-hint">基础战场 >> 点击查看详情</div>
                            </div>
                        </div>
                        <div class="mt-4 p-3 bg-red-500/10 rounded-lg text-xs text-red-400 text-center border border-red-500/20">
                            <strong>全年总外出频次：474次</strong> | 点击各卡片查看详细客户拜访计划
                        </div>
                    </div>

                    <!-- 专利业务规划 -->
                    <div class="sand-card">
                        <div class="sand-card-title text-purple-400">专利翻译业务规划</div>
                        <div class="grid grid-cols-2 gap-3 text-xs">
                            <div class="bg-red-500/10 p-3 rounded-lg text-center border border-red-500/30">
                                <div class="text-red-400 font-bold mb-1">Q1</div>
                                <div>客户确认</div>
                                <div class="text-slate-400 mt-1">四家大客户</div>
                            </div>
                            <div class="bg-orange-500/10 p-3 rounded-lg text-center border border-orange-500/30">
                                <div class="text-orange-400 font-bold mb-1">Q2</div>
                                <div>合作开启</div>
                                <div class="text-slate-400 mt-1">月产50万</div>
                            </div>
                            <div class="bg-green-500/10 p-3 rounded-lg text-center border border-green-500/30">
                                <div class="text-green-400 font-bold mb-1">Q3</div>
                                <div>横向开拓</div>
                                <div class="text-slate-400 mt-1">月产70万</div>
                            </div>
                            <div class="bg-blue-500/10 p-3 rounded-lg text-center border border-blue-500/30">
                                <div class="text-blue-400 font-bold mb-1">Q4</div>
                                <div>战略合作</div>
                                <div class="text-slate-400 mt-1">月产60万</div>
                            </div>
                        </div>
                        <div class="mt-3 text-xs text-slate-400 text-center">
                            全年目标：600万业绩
                        </div>
                    </div>

                    <!-- 风险预警 -->
                    <div class="sand-card">
                        <div class="sand-card-title text-red-400">风险预警（新增业务）</div>
                        <div class="risk-item risk-high">
                            <span class="text-lg">🔴</span>
                            <div>
                                <div class="font-bold">老客户增长不及40%</div>
                                <div class="text-xs opacity-80">预案：提前启动Q4冲刺</div>
                            </div>
                        </div>
                        <div class="risk-item risk-mid">
                            <span class="text-lg">🟡</span>
                            <div>
                                <div class="font-bold">新客户签约延迟</div>
                                <div class="text-xs opacity-80">预案：储备候补客户</div>
                            </div>
                        </div>
                        <div class="risk-item risk-mid">
                            <span class="text-lg">🟠</span>
                            <div>
                                <div class="font-bold">专利翻译业务不足</div>
                                <div class="text-xs opacity-80">预案：切换客户目标</div>
                            </div>
                        </div>
                        <div class="risk-item risk-high">
                            <span class="text-lg">🔴</span>
                            <div>
                                <div class="font-bold">翰森单一客户风险</div>
                                <div class="text-xs opacity-80">预案：备选方案激活</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 执行摘要 -->
                <div class="summary-bar-sand">
                    <div class="summary-item-sand">
                        <div class="text-xs text-slate-400 mb-1">业绩目标</div>
                        <div class="text-xl font-bold text-red-400">3600万</div>
                        <div class="text-xs text-slate-500">+87%</div>
                    </div>
                    <div class="summary-item-sand">
                        <div class="text-xs text-slate-400 mb-1">老客户贡献</div>
                        <div class="text-xl font-bold text-green-400">2695万</div>
                        <div class="text-xs text-slate-500">40%增长</div>
                    </div>
                    <div class="summary-item-sand">
                        <div class="text-xs text-slate-400 mb-1">新客户贡献</div>
                        <div class="text-xl font-bold text-orange-400">300万</div>
                        <div class="text-xs text-slate-500">3家百万级</div>
                    </div>
                    <div class="summary-item-sand">
                        <div class="text-xs text-slate-400 mb-1">新业务贡献</div>
                        <div class="text-xl font-bold text-purple-400">600万</div>
                        <div class="text-xs text-slate-500">专利翻译</div>
                    </div>
                    <div class="summary-item-sand bg-blue-500/10 border border-blue-500/30">
                        <div class="text-xs text-slate-400 mb-1">核心策略</div>
                        <div class="text-base font-bold text-blue-400">保增长·拓新客·开新业</div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- 沙盘作战图详情弹窗 -->
    <div class="modal-sand" id="modalSand">
        <div class="modal-content-sand">
            <div class="modal-header-sand">
                <span id="modalSandTitle">作战详情</span>
                <button class="close-btn-sand" onclick="closeSandModal()">&times;</button>
            </div>
            <div class="modal-body-sand" id="modalSandBody">
                内容加载中...
            </div>
        </div>
    </div>

    <script>
        // 外出作战规划数据
        const visitPlanData = {
            'A+': {
                total: 30,
                customers: [
                    { name: '翰森', visits: 30 }
                ]
            },
            'A': {
                total: 207,
                customers: [
                    { name: '艾力斯', visits: 24 },
                    { name: '海思科', visits: 28 },
                    { name: '齐鲁', visits: 26 },
                    { name: '联邦集团', visits: 22 },
                    { name: '乐普生物', visits: 22 },
                    { name: '灵北制药', visits: 18 },
                    { name: '亚盛', visits: 15 },
                    { name: '恒瑞', visits: 15 },
                    { name: '贺维斯特', visits: 13 }
                ]
            },
            'B': {
                total: 129,
                customers: [
                    { name: '迈威', visits: 12 },
                    { name: '歌礼', visits: 12 },
                    { name: '积水医疗', visits: 12 },
                    { name: '天伟生物', visits: 12 },
                    { name: '禾沃', visits: 15 },
                    { name: '通化东宝', visits: 10 },
                    { name: '君信', visits: 10 },
                    { name: '潓美医疗', visits: 10 },
                    { name: '安通', visits: 10 },
                    { name: '一洋', visits: 10 },
                    { name: '康川济', visits: 10 }
                ]
            },
            'C': {
                total: 108,
                customers: [
                    { name: '英途康医疗', visits: 8 },
                    { name: '都正', visits: 8 },
                    { name: '中通', visits: 8 },
                    { name: '鼎科医疗', visits: 8 },
                    { name: '奥全', visits: 8 },
                    { name: '医米', visits: 8 },
                    { name: '亦度正康', visits: 8 },
                    { name: '金墁利', visits: 8 },
                    { name: '瑞奥', visits: 8 },
                    { name: '卡文迪许', visits: 8 },
                    { name: '健耕', visits: 8 },
                    { name: '万邦德', visits: 8 },
                    { name: '爱美客', visits: 8 },
                    { name: '信诺维', visits: 8 },
                    { name: '复星', visits: 8 },
                    { name: '优锐', visits: 8 },
                    { name: '必扬', visits: 8 },
                    { name: '勤浩', visits: 8 },
                    { name: '亚马逊', visits: 6 },
                    { name: '迈瑞', visits: 6 },
                    { name: '天玑济世', visits: 5 },
                    { name: '开封明仁', visits: 5 },
                    { name: '麦澜德', visits: 5 },
                    { name: '谊安', visits: 5 },
                    { name: '亚宝', visits: 5 },
                    { name: '富吉', visits: 5 },
                    { name: '悉咨', visits: 5 }
                ]
            }
        };

        const details = {
            base: {
                title: "去年基础留存作战方案",
                content: "确保1925万存量业务100%留存<br><br><strong>关键动作：</strong><br>• 1月完成全部客户续约谈判<br>• 建立客户健康度评分体系<br>• 针对D类130家小客户实施自动化维护<br>• A+类翰森客户成立专属服务小组<br><br><strong>风险对冲：</strong>提前6个月启动续约"
            },
            growth: {
                title: "老客户增长40%攻坚方案",
                content: "深度挖掘存量客户价值，实现770万增量<br><br><strong>重点客户：</strong><br>• 翰森(A+)：服务升级，增收150万<br>• 艾力斯/海思科(A)：扩单策略，各增收80万<br>• 齐鲁(A)：框架协议，增收60万<br>• 其他存量：自然增长+激活，增收350万"
            },
            new: {
                title: "新客户开拓闪电战",
                content: "签约3家百万级新客户，贡献300万增量<br><br><strong>目标客户：</strong><br>• 新客户A（生物医药）：Q2签约，100万<br>• 新客户B（医疗器械）：Q3签约，100万<br>• 新客户C（CRO服务）：Q4签约，100万<br><br><strong>策略：</strong>行业深耕+口碑转介绍"
            },
            patent: {
                title: "专利翻译新业务孵化",
                content: "组建专业团队，提供PCT专利申请文件翻译<br><br><strong>里程碑：</strong><br>• Q1：成功合作一家大客户专利部，首单落地<br>• Q2：月业绩50万，成交第二第三家专利客户首单，稳定交付<br>• Q3：月业绩70万，口碑传播<br>• Q4：月业绩60万<br><br><strong>目标：</strong>全年600万"
            },
            q1: {
                title: "Q1 作战方案（1-3月）",
                content: "<strong>目标：154万（老客户增长）</strong><br><br>• 存量客户盘点+upsell方案制定<br>• 签约率目标：30%<br>• 确定3家目标客户名单<br>• 成交三家大客户专利部门<br>• 年度框架协议签署启动"
            },
            q2: {
                title: "Q2 作战方案（4-6月）",
                content: "<strong>目标：231万（交叉销售+新客户）</strong><br><br>• 交叉销售+服务升级推进<br>• 签约率目标：60%<br>• 新客户A签约（生物医药）<br>• 专利翻译月业绩达50万<br>• 新增客户签约+专利爬坡"
            },
            q3: {
                title: "Q3 作战方案（7-9月）",
                content: "<strong>目标：231万（全面交付）</strong><br><br>• 年度框架协议签署<br>• 签约率目标：90%<br>• 新客户B签约（医疗器械）<br>• 专利翻译月业绩达70万<br>• 全面交付+产能释放"
            },
            q4: {
                title: "Q4 作战方案（10-12月）",
                content: "<strong>目标：154万（冲刺+储备）</strong><br><br>• 冲刺+续约锁定<br>• 100%达成770万老客户增长<br>• 新客户C签约（CRO服务）<br>• 专利翻译月业绩60万<br>• 全年600万专利业务达成"
            }
        };

        function showDetail(type) {
            const modal = document.getElementById('modalSand');
            const title = document.getElementById('modalSandTitle');
            const body = document.getElementById('modalSandBody');

            const data = details[type];
            if (data) {
                title.textContent = data.title;
                body.innerHTML = data.content;
                modal.classList.add('active');
            }
        }

        function showClient(level) {
            const modal = document.getElementById('modalSand');
            const title = document.getElementById('modalSandTitle');
            const body = document.getElementById('modalSandBody');

            const clients = {
                'A+': '翰森 | 500万/年<br>策略：深度绑定，服务升级，防范单一客户风险',
                'A': '艾力斯、海思科等8家 | 1,030万<br>策略：扩单+交叉销售',
                'B': '15家客户 | 780万<br>策略：框架协议+年度预算锁定',
                'C': '20家客户 | 490万<br>策略：自动化服务+定期回访',
                'D': '130家小客户 | 650万<br>策略：标准化产品+自助服务平台'
            };

            title.textContent = level + '类客户作战策略';
            body.innerHTML = clients[level];
            modal.classList.add('active');
        }

        function showVisitDetail(level) {
            const modal = document.getElementById('modalSand');
            const title = document.getElementById('modalSandTitle');
            const body = document.getElementById('modalSandBody');

            const tierData = visitPlanData[level];
            if (!tierData) return;

            title.textContent = level + '类客户外出作战详情';

            let content = `<div style="margin-bottom: 15px; padding: 10px; background: rgba(251, 191, 36, 0.1); border-radius: 6px; font-size: 14px; color: #fbbf24; text-align: center;">
                <strong>总访问频次：${tierData.total}次</strong> | ${tierData.customers.length}家客户
            </div>`;

            content += '<div class="visit-detail-list"><div class="detail-grid">';
            content += '<div class="grid-header">客户名称</div><div class="grid-header">访问频次</div>';

            tierData.customers.forEach(customer => {
                content += `<div class="grid-row">
                    <div>${customer.name}</div>
                    <div class="visits">${customer.visits}次</div>
                </div>`;
            });

            content += '</div></div>';

            body.innerHTML = content;
            modal.classList.add('active');
        }

        function closeSandModal() {
            document.getElementById('modalSand').classList.remove('active');
        }

        // 点击空白处关闭弹窗
        document.getElementById('modalSand').addEventListener('click', function(e) {
            if (e.target === this) closeSandModal();
        });

        // 全局变量
        let app, database, dataRef;
        let compositionChart, teamChart;
        let currentData = {
            totalRevenue: 237,
            newCustomerCount: 11,
            newCustomerRevenue: 25,
            patentRevenue: 0.4,
            davidCurrent: 79,
            cathyCurrent: 95,
            echoCurrent: 63,
            lastUpdate: new Date().toISOString(),
            okr: {
                david: {
                    o1: { kr1: 999, kr3: 6 },
                    o2: { kr1: 8, kr2: 4, kr3: 50 },
                    o3: { kr1: 3, kr2: 1, kr3: 200 }
                },
                echo: {
                    o1: { kr1: 888, kr2: 24, kr3: 48 },
                    o2: { kr1: 480, kr2: 240, kr3: 36, kr4: 60 },
                    o3: { kr1: 240, kr2: 240, kr3: 48, kr4: 12000 }
                }
            },
            february: {
                david: {
                    'revenue':       { w1: 0, w2: 19, w3: 0, w4: 0, target: 100 },
                    'patent':        { w1: 0, w2: 0,  w3: 0, w4: 0, target: 10 },
                    'daily-followup':{ w1: 0, w2: 21, w3: 0, w4: 0, target: 200 },
                    'contacts':      { w1: 0, w2: 3,  w3: 0, w4: 0, target: 20 },
                    'visits':        { w1: 0, w2: 14, w3: 0, w4: 0, target: 20 },
                    'social':        { w1: 0, w2: 1,  w3: 0, w4: 0, target: 5 },
                    'gift-tea':      { w1: 0, w2: 3,  w3: 0, w4: 0, target: 8 },
                    'calls':         { w1: 0, w2: 14, w3: 0, w4: 0, target: 40 },
                    'invoice':       { w1: 0, w2: 7,  w3: 0, w4: 0, target: 50 },
                    'payment':       { w1: 0, w2: 7,  w3: 0, w4: 0, target: 50 }
                },
                cathy: {
                    'a-visits':    { w1: 2,  w2: 0, w3: 0, w4: 0, target: 5 },
                    'b-visits':    { w1: 9,  w2: 0, w3: 0, w4: 0, target: 15 },
                    'contacts':    { w1: 5,  w2: 0, w3: 0, w4: 0, target: 20 },
                    'deep-visits': { w1: 2,  w2: 0, w3: 0, w4: 0, target: 5 },
                    'guiren':      { w1: 1,  w2: 0, w3: 0, w4: 0, target: 4 },
                    'social':      { w1: 1,  w2: 0, w3: 0, w4: 0, target: 3 },
                    'call-visit':  { w1: 8,  w2: 0, w3: 0, w4: 0, target: 9 },
                    'leads':       { w1: 50, w2: 0, w3: 0, w4: 0, target: 300 },
                    'crevenue':    { w1: 17, w2: 0, w3: 0, w4: 0, target: 200 },
                    'invoice':     { w1: 10, w2: 0, w3: 0, w4: 0, target: 100 },
                    'payment':     { w1: 3,  w2: 0, w3: 0, w4: 0, target: 50 }
                },
                echo: {
                    'visits':   { w1: 0, w2: 0, w3: 0, w4: 0, target: 20 },
                    'b-class':  { w1: 0, w2: 0, w3: 0, w4: 0, target: 2 },
                    'emails':   { w1: 0, w2: 0, w3: 0, w4: 0, target: 40 },
                    'voice':    { w1: 0, w2: 0, w3: 0, w4: 0, target: 20 },
                    'patent':   { w1: 0, w2: 0, w3: 0, w4: 0, target: 4 },
                    'gift':     { w1: 0, w2: 0, w3: 0, w4: 0, target: 1000 },
                    'social':   { w1: 0, w2: 0, w3: 0, w4: 0, target: 3 },
                    'blessing': { w1: 0, w2: 0, w3: 0, w4: 0, target: 5 },
                    'contacts': { w1: 0, w2: 0, w3: 0, w4: 0, target: 20 },
                    'sync':     { w1: 0, w2: 0, w3: 0, w4: 0, target: 4 },
                    'invoice':  { w1: 0, w2: 0, w3: 0, w4: 0, target: 100 },
                    'payment':  { w1: 0, w2: 0, w3: 0, w4: 0, target: 50 }
                }
            }
        };

        // 视图切换
        function switchView(viewName) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.person-tab').forEach(el => el.classList.remove('active'));

            document.getElementById('view-' + viewName).classList.add('active');
            document.getElementById('nav-' + viewName).classList.add('active');

            if (viewName === 'dashboard' && compositionChart) {
                setTimeout(() => {
                    compositionChart.resize();
                    teamChart.resize();
                }, 100);
            }

            if (['david', 'cathy', 'echo'].includes(viewName)) {
                calculateWeekTotals(viewName);
            }

            // 沙盘作战图进度条动画
            if (viewName === 'strategy') {
                setTimeout(() => {
                    document.querySelectorAll('.progress-sand-fill').forEach(bar => {
                        const width = bar.style.width;
                        bar.style.width = '0';
                        setTimeout(() => {
                            bar.style.width = width;
                        }, 100);
                    });
                }, 300);
            }
        }

        // ─── 实时推送：显示Toast通知 ───────────────────────────
        function showToast(msg, color = '#22c55e') {
            let toast = document.getElementById('liveToast');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'liveToast';
                toast.style.cssText = 'position:fixed;bottom:24px;right:24px;z-index:9999;padding:10px 18px;border-radius:10px;font-size:13px;font-weight:700;color:#fff;opacity:0;transition:opacity 0.4s;pointer-events:none;backdrop-filter:blur(10px);';
                document.body.appendChild(toast);
            }
            toast.style.background = color + 'cc';
            toast.style.border = '1px solid ' + color;
            toast.textContent = msg;
            toast.style.opacity = '1';
            clearTimeout(toast._timer);
            toast._timer = setTimeout(() => { toast.style.opacity = '0'; }, 2500);
        }

        // ─── Firebase 初始化（实时多人同步）────────────────────
        function initFirebase() {
            const firebaseConfig = {
                databaseURL: "https://war2026-a4ad1-default-rtdb.asia-southeast1.firebasedatabase.app"
            };

            try {
                app = firebase.initializeApp(firebaseConfig);
                database = firebase.database();
                dataRef = database.ref('dashboard/sales6');

                // ── 在线人数统计 ──
                const connRef = database.ref('.info/connected');
                const presenceRef = database.ref('presence/' + Date.now());
                connRef.on('value', snap => {
                    if (snap.val()) {
                        presenceRef.onDisconnect().remove();
                        presenceRef.set(true);
                    }
                });
                database.ref('presence').on('value', snap => {
                    const count = snap.numChildren();
                    const el = document.getElementById('onlineCount');
                    if (el) el.textContent = count;
                });

                // ── 监听数据变化（实时同步到所有端）──
                let firstLoad = true;
                dataRef.on('value', (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        // 深度合并，保留本地结构
                        if (data.february) {
                            ['david','cathy','echo'].forEach(p => {
                                if (data.february[p]) {
                                    if (!currentData.february[p]) currentData.february[p] = {};
                                    Object.assign(currentData.february[p], data.february[p]);
                                }
                            });
                        }
                        const { february, okr, ...rest } = data;
                        Object.assign(currentData, rest);
                        if (data.okr) currentData.okr = { ...currentData.okr, ...data.okr };

                        updateDashboard();
                        refreshAllCells();

                        const statusEl = document.getElementById('connectionStatus');
                        statusEl.innerHTML = '<i class="fas fa-wifi text-green-400"></i><span class="text-green-400 ml-1">实时同步</span><span class="text-green-300 ml-1">· <span id="onlineCount">1</span>人在线</span>';
                        statusEl.className = 'px-3 py-1 rounded-full text-xs font-bold bg-green-500/20 text-green-400 border border-green-500/30 flex items-center gap-2 shrink-0';

                        if (!firstLoad) showToast('✓ 数据已更新');
                        firstLoad = false;
                    }
                    calculateWeekTotals('david');
                    calculateWeekTotals('cathy');
                    calculateWeekTotals('echo');
                });
            } catch (error) {
                console.error('Firebase错误:', error);
                document.getElementById('connectionStatus').innerHTML =
                    '<i class="fas fa-exclamation-circle text-red-400"></i><span class="text-red-400 ml-1">离线模式</span>';
            }
        }

        // ─── 刷新所有周数据单元格（远端同步时更新UI）──────────
        function refreshAllCells() {
            document.querySelectorAll('[data-person][data-item][data-week]').forEach(el => {
                const person = el.getAttribute('data-person');
                const item   = el.getAttribute('data-item');
                const week   = el.getAttribute('data-week');
                const val = currentData.february?.[person]?.[item]?.[week];
                if (val !== undefined) {
                    el.textContent = (val === 0) ? '-' : val;
                }
            });
        }

        // 更新总看板
        function updateDashboard() {
            document.getElementById('totalRevenue').textContent = currentData.totalRevenue;
            document.getElementById('newCustomerCount').textContent = currentData.newCustomerCount;
            document.getElementById('patentRevenue').textContent = currentData.patentRevenue;

            const progress = ((currentData.totalRevenue / 3600) * 100).toFixed(1);
            document.getElementById('yearProgress').textContent = progress;
            document.getElementById('progressBar').style.width = progress + '%';

            const date = new Date(currentData.lastUpdate);
            document.getElementById('lastUpdate').textContent = date.toLocaleTimeString('zh-CN');

            if (compositionChart) {
                const old = currentData.totalRevenue - currentData.newCustomerRevenue - currentData.patentRevenue;
                compositionChart.data.datasets[0].data = [old, currentData.newCustomerRevenue, currentData.patentRevenue];
                compositionChart.update();
            }
            if (teamChart) {
                teamChart.data.datasets[0].data = [currentData.davidCurrent, currentData.cathyCurrent, currentData.echoCurrent];
                teamChart.update();
            }
        }

        // 初始化图表
        function initCharts() {
            const ctx1 = document.getElementById('compositionChart');
            if (ctx1) {
                compositionChart = new Chart(ctx1, {
                    type: 'doughnut',
                    data: {
                        labels: ['老客户增长', '新客户', '专利业务'],
                        datasets: [{
                            data: [211.6, 25, 0.4],
                            backgroundColor: ['#22c55e', '#a855f7', '#ef4444'],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom', labels: { color: '#94a3b8', padding: 15 } }
                        },
                        cutout: '60%'
                    }
                });
            }

            const ctx2 = document.getElementById('teamChart');
            if (ctx2) {
                teamChart = new Chart(ctx2, {
                    type: 'bar',
                    data: {
                        labels: ['David', 'Cathy', 'Echo'],
                        datasets: [{
                            label: '当前业绩(万)',
                            data: [79, 95, 63],
                            backgroundColor: ['#3b82f6', '#8b5cf6', '#f97316'],
                            borderRadius: 8,
                            barThickness: 60
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: { beginAtZero: true, ticks: { color: '#64748b' }, grid: { color: '#334155' } },
                            x: { ticks: { color: '#64748b', font: { size: 14, weight: 'bold' } }, grid: { display: false } }
                        }
                    }
                });
            }
        }

        // 编辑OKR数据
        function editOKR(person, obj, kr, current) {
            const newValue = prompt('更新目标值:', current);
            if (newValue !== null && !isNaN(newValue)) {
                if (!currentData.okr[person]) currentData.okr[person] = {};
                if (!currentData.okr[person][obj]) currentData.okr[person][obj] = {};
                currentData.okr[person][obj][kr] = parseFloat(newValue);
                if (dataRef) dataRef.child('okr').set(currentData.okr);
                location.reload();
            }
        }

        // ─── 编辑周数据（即时推送到Firebase）────────────────────
        function editWeekData(element) {
            const currentValue = element.textContent.trim() === '-' ? '' : element.textContent.trim();
            const newValue = prompt('请输入数值（留空清除）:', currentValue);

            if (newValue !== null) {
                const numVal = newValue === '' ? 0 : parseFloat(newValue);
                element.textContent = (numVal === 0) ? '-' : numVal;

                const person = element.getAttribute('data-person');
                const item   = element.getAttribute('data-item');
                const week   = element.getAttribute('data-week');

                if (currentData.february?.[person]?.[item]) {
                    currentData.february[person][item][week] = numVal;
                    calculateWeekTotals(person);
                    // 即时推送到Firebase，所有人实时看到
                    if (dataRef) {
                        dataRef.child('february').child(person).child(item).child(week).set(numVal)
                            .then(() => showToast('✓ 已同步给所有人'))
                            .catch(() => showToast('⚠ 同步失败，请重试', '#ef4444'));
                    }
                }
            }
        }

        // 计算周完成度
        function calculateWeekTotals(person) {
            const data = currentData.february[person];
            if (!data) return;

            let totalPercent = 0;
            let itemCount = 0;

            for (let [key, values] of Object.entries(data)) {
                const sum = values.w1 + values.w2 + values.w3 + values.w4;
                const percent = (sum / values.target * 100).toFixed(1);

                const totalEl = document.getElementById(`${person}-${key}-total`);
                if (totalEl) {
                    if (['a-visits', 'b-visits', 'contacts', 'b-class', 'deep-visits', 'guiren', 'b-class', 'visits', 'patent', 'b-class', 'social', 'sync', 'blessing'].includes(key) && values.target <= 20) {
                        totalEl.textContent = `${sum}/${values.target}`;
                        if (sum >= values.target) {
                            totalEl.className = 'text-right font-bold completion-high text-xs';
                        } else if (sum >= values.target * 0.5) {
                            totalEl.className = 'text-right font-bold completion-mid text-xs';
                        } else {
                            totalEl.className = 'text-right font-bold completion-low text-xs';
                        }
                    } else {
                        totalEl.textContent = `${sum}/${values.target}`;
                        if (percent >= 100) {
                            totalEl.className = 'text-right font-bold completion-high text-xs';
                        } else if (percent > 50) {
                            totalEl.className = 'text-right font-bold completion-mid text-xs';
                        } else {
                            totalEl.className = 'text-right font-bold completion-low text-xs';
                        }
                    }
                }

                totalPercent += parseFloat(percent);
                itemCount++;
            }

            const overallEl = document.getElementById(`${person}-overall`);
            if (overallEl && itemCount > 0) {
                const avg = (totalPercent / itemCount).toFixed(1);
                overallEl.textContent = avg + '%';
            }
        }

        // ─── 手动触发全量同步（备用）────────────────────────────
        function saveWeekData(person) {
            if (dataRef) {
                dataRef.child('february').child(person).set(currentData.february[person])
                    .then(() => showToast('✓ ' + person + ' 全量数据已同步'))
                    .catch(err => showToast('⚠ 同步失败: ' + err, '#ef4444'));
            } else {
                showToast('⚠ 当前离线，无法同步', '#f59e0b');
            }
        }

        // ─── 编辑主看板数据（即时推送）──────────────────────────
        function editMainData(field) {
            const value = currentData[field];
            const newValue = prompt('更新数值:', value);
            if (newValue !== null && !isNaN(newValue)) {
                currentData[field] = parseFloat(newValue);
                currentData.lastUpdate = new Date().toISOString();
                updateDashboard();
                if (dataRef) {
                    dataRef.child(field).set(parseFloat(newValue));
                    dataRef.child('lastUpdate').set(currentData.lastUpdate);
                    showToast('✓ 已同步给所有人');
                }
            }
        }

        // ─── 编辑个人总业绩（即时推送）──────────────────────────
        function editPersonData(person, field, current) {
            const newValue = prompt('更新当前业绩(万):', current);
            if (newValue !== null && !isNaN(newValue)) {
                const key = person + 'Current';
                currentData[key] = parseFloat(newValue);
                currentData.lastUpdate = new Date().toISOString();
                if (dataRef) {
                    dataRef.child(key).set(parseFloat(newValue));
                    dataRef.child('lastUpdate').set(currentData.lastUpdate);
                    showToast('✓ 业绩数据已同步');
                }
                location.reload();
            }
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', () => {
            initFirebase();
            initCharts();
            setTimeout(() => {
                calculateWeekTotals('david');
                calculateWeekTotals('cathy');
                calculateWeekTotals('echo');
            }, 500);
        });
    </script>
    <!-- 分享/部署指引弹窗 -->
    <div id="hostingModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,0.85);z-index:10000;align-items:center;justify-content:center;padding:20px;" onclick="if(event.target===this)this.style.display='none'">
        <div style="background:#1e293b;border:1px solid rgba(59,130,246,0.4);border-radius:20px;padding:32px;max-width:540px;width:100%;box-shadow:0 25px 60px rgba(0,0,0,0.6);">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:24px;">
                <h2 style="font-size:20px;font-weight:800;color:#fff;display:flex;align-items:center;gap:8px;">
                    <i class="fas fa-share-alt" style="color:#3b82f6"></i> 发布在线看板
                </h2>
                <button onclick="document.getElementById('hostingModal').style.display='none'" style="background:none;border:none;color:#94a3b8;font-size:22px;cursor:pointer;">×</button>
            </div>

            <div style="background:rgba(34,197,94,0.1);border:1px solid rgba(34,197,94,0.3);border-radius:12px;padding:16px;margin-bottom:20px;">
                <div style="color:#22c55e;font-weight:700;margin-bottom:8px;font-size:14px;">✓ 实时同步已就绪</div>
                <div style="color:#94a3b8;font-size:13px;line-height:1.6;">数据库已连接 Firebase，任何人打开此页面都能实时看到数据更新，无需额外配置。</div>
            </div>

            <div style="color:#e2e8f0;font-size:14px;font-weight:700;margin-bottom:12px;">📤 两步发布，获得在线链接：</div>

            <div style="space-y:12px;">
                <div style="background:rgba(59,130,246,0.1);border:1px solid rgba(59,130,246,0.25);border-radius:10px;padding:14px;margin-bottom:12px;">
                    <div style="color:#60a5fa;font-weight:700;font-size:13px;margin-bottom:6px;">方法一：Netlify Drop（最简单，30秒）</div>
                    <div style="color:#94a3b8;font-size:12px;line-height:1.7;">
                        1. 打开 <strong style="color:#60a5fa">app.netlify.com/drop</strong><br>
                        2. 将下载的 HTML 文件拖入页面<br>
                        3. 获得 <code style="background:#0f172a;padding:2px 6px;border-radius:4px;color:#a78bfa">https://xxx.netlify.app</code> 链接<br>
                        4. 把链接发给 David、Cathy、Echo 即可 🎉
                    </div>
                </div>

                <div style="background:rgba(139,92,246,0.1);border:1px solid rgba(139,92,246,0.25);border-radius:10px;padding:14px;margin-bottom:12px;">
                    <div style="color:#a78bfa;font-weight:700;font-size:13px;margin-bottom:6px;">方法二：GitHub Pages（免费永久）</div>
                    <div style="color:#94a3b8;font-size:12px;line-height:1.7;">
                        1. 新建 GitHub 仓库，上传 HTML 文件（改名 index.html）<br>
                        2. Settings → Pages → 选择 main 分支<br>
                        3. 获得 <code style="background:#0f172a;padding:2px 6px;border-radius:4px;color:#a78bfa">https://用户名.github.io/仓库名</code>
                    </div>
                </div>

                <div style="background:rgba(245,158,11,0.1);border:1px solid rgba(245,158,11,0.25);border-radius:10px;padding:14px;">
                    <div style="color:#fbbf24;font-weight:700;font-size:13px;margin-bottom:6px;">⚠ Firebase 数据库权限设置</div>
                    <div style="color:#94a3b8;font-size:12px;line-height:1.7;">
                        如遇到写入失败，请登录 Firebase 控制台设置 Realtime Database 规则：<br>
                        <code style="background:#0f172a;display:block;margin-top:6px;padding:8px;border-radius:6px;color:#22c55e;font-size:11px;">{ "rules": { ".read": true, ".write": true } }</code>
                    </div>
                </div>
            </div>

            <div style="margin-top:20px;text-align:center;">
                <button onclick="document.getElementById('hostingModal').style.display='none'" style="background:linear-gradient(90deg,#3b82f6,#8b5cf6);color:#fff;border:none;padding:10px 28px;border-radius:10px;font-weight:700;cursor:pointer;font-size:14px;">
                    知道了 👍
                </button>
            </div>
        </div>
    </div>

    <script>
    function showHostingInfo() {
        document.getElementById('hostingModal').style.display = 'flex';
    }
    </script>
</body>
</html>
